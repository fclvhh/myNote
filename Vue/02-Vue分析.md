> 这里不讨论:  虚拟DOM是什么,具体是怎么实现的!
>
> 说实话对于小白来说意义不大,对于工作来说意义也不大
>
> 我们需要知道diff算法是怎么玩的吗?
>
> 只不过那群面试的喜欢问这个而已. 对于一个刚学会开车的人就要知道汽车制造原理?
>
> 总之就是很乖
>
> 简单了解一下虚拟DOM, 为后面学习扫个盲,就是全部意义!

# 参考资料

- [虚拟DOM](https://juejin.im/post/5d36cc575188257aea108a74#heading-19)
- [如何理解虚拟DOM](https://juejin.im/entry/5aedcfa351882506a36c664c)









# 真实DOM和其解析流程



浏览器渲染引擎「webkit」的工作流程

- 分析html,构建DOM树
- 分析css,构建样式表
  - css文件
  - html内联元素
- 将 DOM 树和样式表关联起来，构建一棵 Render 树
- 根据 Render 树结构，为每个 Render 树上的节点确定一个在显示屏上出现的**精确坐标**；
- 绘制页面
  - 根据 Render 树和节点显示坐标，然后调用每个节点的 paint 方法，将它们绘制出来



注意点;

- DOM树和Render树的构建是渐进的
  - 不是完全独立的，而是会有交叉，会一边加载，一边解析，以及一边渲染
- css解析
  - 嵌套标签越多，解析越慢
  - 这也就提高效率的一个提升方式

- js操作真实DOM的代价
  - 传统开发: 浏览器监听到DOM操作时 , 会从头到尾执行渲染过程
  - 这个过程「开销很大」



# 虚拟DOM

webkit渲染速度太慢:

- DOM这个windows对象的数据结构实在是太庞大了,所以渲染的速度很慢很慢
- 用js模拟DOM的数据结构(简化), 模拟出来「简化数据结构的树」就是虚拟DOM 树

真实DOM的痛点 : 

1. 数据结构太过复杂
2. 浏览器无法确切的知道DOM树那里发生了改变(只知道发生了,却不知在哪里发生的)
3. 因此需要重复的计算节点坐标,这个开销巨大



虚拟DOM:

1. 用一个js对象去记录DOM操作
2. 然后整个转换去操作真实DOM
   1. 节点坐标运算就只需要一次
   2. 节约了效率

